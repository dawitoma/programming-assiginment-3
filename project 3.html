<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bouncing 3D Cube</title>
    <!-- Include Three.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        /* =======================
           STYLING
           ======================= */
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: linear-gradient(to bottom, #2c3e50, #1a1a1a);
            font-family: 'Arial', sans-serif;
            color: #ecf0f1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 800px;
            text-align: center;
            z-index: 10;
            padding: 20px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            margin-bottom: 20px;
        }

        h1 {
            margin-top: 0;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            color: #f1c40f;
        }

        p {
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .canvas-container {
            width: 100%;
            height: 400px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.7);
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            padding: 10px 20px;
            background: #3498db;
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }

        button:hover {
            background: #2980b9;
        }

        .stats {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .stat-box {
            background: rgba(0, 0, 0, 0.4);
            padding: 10px 15px;
            border-radius: 5px;
            min-width: 100px;
        }

        .highlight {
            color: #f1c40f;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Bouncing 3D Cube</h1>
        <p>A 3D cube bouncing around the screen, changing colors when it hits the edges. Illuminated by a light-yellow light source in the upper left corner.</p>
    </div>
    
    <div class="canvas-container" id="canvas-container"></div>
    
    <div class="controls">
        <button id="speedUp">Speed Up</button>
        <button id="speedDown">Slow Down</button>
        <button id="toggleRotation">Toggle Rotation</button>
        <button id="changeShape">Change Shape</button>
        <button id="shareButton">Share</button>
    </div>
    
    <div class="stats">
        <div class="stat-box">Speed: <span id="speedValue" class="highlight">Normal</span></div>
        <div class="stat-box">Bounces: <span id="bounceCount" class="highlight">0</span></div>
        <div class="stat-box">Current Color: <span id="currentColor" class="highlight">Red</span></div>
    </div>

    <!-- ==========================
         JAVASCRIPT (FULLY DOCUMENTED)
         ========================== -->
    <script>
        // Initialize Three.js scene
        const scene = new THREE.Scene();
        const container = document.getElementById('canvas-container');

        // Create camera
        const camera = new THREE.PerspectiveCamera(
            75, 
            container.clientWidth / container.clientHeight,
            0.1,
            1000
        );

        // Create renderer
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(container.clientWidth, container.clientHeight);
        renderer.setClearColor(0x000000, 0);
        container.appendChild(renderer.domElement);

        // Add point light
        const light = new THREE.PointLight(0xFFFFAA, 1.5, 100);
        light.position.set(-10, 10, 10);
        scene.add(light);

        // Ambient light
        const ambientLight = new THREE.AmbientLight(0x404040, 0.5);
        scene.add(ambientLight);

        // Initial geometry and material
        let geometry = new THREE.BoxGeometry(1.5, 1.5, 1.5);
        let material = new THREE.MeshPhongMaterial({
            color: 0xff0000,
            shininess: 100,
            specular: 0x222222
        });

        // Create mesh
        let mesh = new THREE.Mesh(geometry, material);
        scene.add(mesh);
        mesh.position.set(0, 0, 0);

        // Velocity and limits
        let velocity = { x: 0.02, y: 0.015, z: 0 };
        const xLimit = 4, yLimit = 2.8, zLimit = 3;

        // Colors
        const colors = [
            { value: 0xff0000, name: "Red" },
            { value: 0x00ff00, name: "Green" },
            { value: 0x0000ff, name: "Blue" },
            { value: 0xffff00, name: "Yellow" },
            { value: 0xff00ff, name: "Magenta" },
            { value: 0x00ffff, name: "Cyan" },
            { value: 0xff7700, name: "Orange" },
            { value: 0xaa00ff, name: "Purple" }
        ];
        let colorIndex = 0;
        let bounceCount = 0;
        let rotationEnabled = true;
        let speedMultiplier = 1;
        let currentShape = 'cube';

        // Update stats
        function updateStats() {
            document.getElementById('bounceCount').textContent = bounceCount;
            document.getElementById('currentColor').textContent = colors[colorIndex].name;

            let speedText;
            if (speedMultiplier < 1) speedText = "Slow";
            else if (speedMultiplier === 1) speedText = "Normal";
            else if (speedMultiplier <= 2) speedText = "Fast";
            else speedText = "Very Fast";

            document.getElementById('speedValue').textContent = speedText;
        }

        // Change color on bounce
        function changeColor() {
            colorIndex = (colorIndex + 1) % colors.length;
            material.color.setHex(colors[colorIndex].value);
            material.needsUpdate = true;
            bounceCount++;
            updateStats();
        }

        // Change shape
        function changeShape() {
            scene.remove(mesh);
            if (currentShape === 'cube') {
                geometry = new THREE.SphereGeometry(1, 32, 32);
                currentShape = 'sphere';
            } else if (currentShape === 'sphere') {
                geometry = new THREE.TorusKnotGeometry(1, 0.4, 100, 16);
                currentShape = 'torusknot';
            } else {
                geometry = new THREE.BoxGeometry(1.5, 1.5, 1.5);
                currentShape = 'cube';
            }
            mesh = new THREE.Mesh(geometry, material);
            scene.add(mesh);
        }

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);

            mesh.position.x += velocity.x * speedMultiplier;
            mesh.position.y += velocity.y * speedMultiplier;

            if (Math.abs(mesh.position.x) > xLimit) { velocity.x = -velocity.x; changeColor(); }
            if (Math.abs(mesh.position.y) > yLimit) { velocity.y = -velocity.y; changeColor(); }

            if(rotationEnabled){
                mesh.rotation.x += 0.01 * speedMultiplier;
                mesh.rotation.y += 0.01 * speedMultiplier;
            }

            renderer.render(scene, camera);
        }

        camera.position.z = 5;

        // Resize
        window.addEventListener('resize', () => {
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
        });

        // Button events
        document.getElementById('speedUp').addEventListener('click', () => { 
            speedMultiplier = Math.min(speedMultiplier + 0.5, 3); updateStats(); 
        });
        document.getElementById('speedDown').addEventListener('click', () => { 
            speedMultiplier = Math.max(speedMultiplier - 0.5, 0.5); updateStats(); 
        });
        document.getElementById('toggleRotation').addEventListener('click', () => { rotationEnabled = !rotationEnabled; });
        document.getElementById('changeShape').addEventListener('click', changeShape);

        // Share button
        document.getElementById('shareButton').addEventListener('click', () => {
            const livePreviewURL = "https://example.com/graphics-view";
            const codeViewURL = "https://example.com/code-view";
            const jsCode = `${document.querySelector('script').textContent.trim()}`;
            const contentToCopy = `
Live Preview URL: ${livePreviewURL}
Code View URL: ${codeViewURL}

JavaScript Code:
${jsCode}`;
            navigator.clipboard.writeText(contentToCopy)
                .then(() => alert("Live preview, code view URLs, and JS code copied!"))
                .catch(err => console.error(err));
        });

        updateStats();
        animate();
    </script>
</body>
</html>
